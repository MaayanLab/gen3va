{% extends 'wrapper.html' %}

{% block body %}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/2.2.2/isotope.pkgd.min.js"></script>
    <script src="static/js/index.js"></script>

    <div class="page" id="index-page">
        <div>
            <h2><strong>Analyze labeled consensus signatures extracted from <a href="http://www.ncbi.nlm.nih.gov/geo/" target="_blank">GEO</a>.</strong></h2>
        </div>
        <p id="intoduction">
            <strong>GEN3VA:</strong> the <strong>GENE E</strong>xpression and <strong>E</strong>nrichment <strong>V</strong>ector <strong>A</strong>nalyzer aggregates and analyzes gene expression signatures extracted from <a href="http://www.ncbi.nlm.nih.gov/geo/" target="_blank">GEO</a> by the crowd using <a href="http://amp.pharm.mssm.edu/g2e/" target="_blank">GEO2Enrichr</a>. Clicking on a tag below, you can view an aggregated report that provides global, interactive views, including enrichment analyses, for collections of signatures from multiple studies sharing a biological theme.
        </p>
        <div id="isotope-container">
            <div id="filters" class="button-group">
                <button class="btn btn-default is-checked" data-filter="*">Show all</button>
                <button class="btn btn-default" data-filter=".curated">Curated</button>
                <button class="btn btn-default" data-filter=".uncurated">Uncurated</button>
                <button class="btn btn-default" data-filter=".ready">Analyzed</button>
                <button class="btn btn-default" data-filter=".pending">Pending</button>
                <button class="btn btn-default" data-filter=".inactive">Inactive</button>
            </div>
            <div id="isotope">
                <div class="grid-sizer"></div>
                {% for tag in tags %}
                    {% if tag.gene_signatures|length > 2 %}
                        {% set curated_status = 'curated' if tag.is_curated else 'uncurated' %}
                        {% set tag_status = tag.reports[-1].status if tag.reports|length > 0 else 'inactive' %}
                        <div class="tag-box {{ curated_status }} {{ tag_status }}">
                            <h5 class="tag-name"><strong>{{ tag.name }}</strong></h5>
                            <p><em>{{ curated_status|capitalize }}</em></p>
                            <p><a href="{{ report_url }}/{{ tag.name }}">Report</a> ({{ tag_status }})</p>
                            <p><a href="{{ tag_url }}/{{ tag.name }}">
                                <span class="signature-count">{{ tag.gene_signatures|length }}</span> signatures</a>
                            </p>
                            {% if tag.description %}
                                <p class="description">{{ tag.description|truncate(250) }}</p>
                            {% endif %}
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>

{% endblock %}